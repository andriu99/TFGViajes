{% extends 'app/layout.html' %}

{% block content %}


    <form method="post">
		{% csrf_token %}
		{{ form }}

        <button id="send_button" >Send</button>
        <div id="google_map" style="width:85%; height: 500px;"></div>

   
        {% if blablaTrips %}
        <div class="titles">
            <h2>Lista de viajes en blablaCar</h2>
        </div>
            <table id="trips">
                <tr>
                    <th>Hora Salida</th>
                    <th>Hora Llegada</th>
                    <th>Precio</th>
                    <th>Link al viaje</th>
                </tr>
                {% for blablaTrip in blablaTrips %}
                    <tr>
                        <td>{{blablaTrip.trip.departureDate|time:"H:i"}}</td>
                        <td>{{blablaTrip.trip.arrivalDate|time:"H:i"}}</td>
                        <td>{{blablaTrip.trip.price}}</td>
                        <td><a href={{blablaTrip.link}} target="_blank">{{blablaTrip.link}}</a></td>
                    </tr>

                {% endfor %}

            </table>

        {% endif %}


        {% if skyscannerTrips %}
            <div class="titles">

                <h2>Lista de viajes en avión</h2>
            </div>
            <table id="trips">
                <tr>
                        <th>Hora Salida</th>
                        <th>Hora Llegada</th>
                        <th>Precio</th>
                        <th>Compañía aerea</th>
                        <th>Nombre del aeropuerto de Salida</th>
                        <th>Nombre del aeropuerto de llegada</th>
                </tr>
                {% for skyscannerTrip in skyscannerTrips %}
                    <tr>
                        <td>{{skyscannerTrip.trip.departureDate|time:"H:i"}}</td>
                        <td>{{skyscannerTrip.trip.arrivalDate|time:"H:i"}}</td>
                        <td>{{skyscannerTrip.trip.price}}</td>

                        <td>{{skyscannerTrip.airlineName}}</td>
                        <td>{{skyscannerTrip.trip.departureNode.name}}</td>
                        <td>{{skyscannerTrip.trip.arrivalNode.name}}</td>
                    </tr>
                {% endfor %}

            </table>
        {% endif %}


        {% if busTrips %}
            <div class="titles">
                <h2>Lista de viajes en bus</h2>
            </div>
            <table id="trips">
                <tr>
                    <th>Hora Salida</th>
                    <th>Hora Llegada</th>
                    <th>Precio</th>
                    <th>Nombre de la Estación de Salida</th>
                    <th>Nombre de la estación de llegada</th>
                </tr>
                {% for busTrip in busTrips %}
                    <tr>
                        <td>{{ busTrip.trip.departureDate|time:"H:i" }}</td>
                        <td>{{ busTrip.trip.arrivalDate|time:"H:i" }}</td>
                        <td>{{ busTrip.trip.price}}</td>
                        <td>{{ busTrip.trip.departureNode.name}}</td>
                        <td>{{ busTrip.trip.arrivalNode.name}}</td>
                    </tr>

                {% endfor %}


            </table>

        {% endif %}


        {% if trainTrips %}
            <div class="titles">

                <h2>Lista de viajes en tren</h2>
            </div>

            <table id="trips">
                <tr>
                    <th>Hora Salida</th>
                    <th>Hora Llegada</th>
                    <th>Precio</th>
                    <th>Nombre de la Estación de Salida</th>
                    <th>Nombre de la estación de llegada</th>
                </tr>
                {% for trainTrip in trainTrips %}
                    <tr>
                        <td>{{ trainTrip.trip.departureDate|time:"H:i" }}</td>
                        <td>{{ trainTrip.trip.arrivalDate|time:"H:i" }}</td>
                        <td>{{trainTrip.trip.price}}</td>
                        <td>{{trainTrip.trip.departureNode.name}}</td>
                        <td>{{trainTrip.trip.arrivalNode.name}}</td>
                    </tr>

                {% endfor %}


            </table>
        {% endif %}

        

        
    

	</form>

{% endblock %}

{% block extend_footer %}
    {% load static %}
    <script src="{% static 'google_maps.js'%}"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCaR0xc4Xiv3rHEV-HkFD-4Dt7hsIx3aT0&libraries=places&callback=init_autocomplete_map" ></script> 
    


{% endblock %}


